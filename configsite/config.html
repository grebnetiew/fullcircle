<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>FullCircle configuration</title>

		<link rel='stylesheet' type='text/css' href='css/slate.css'>
		<script src='js/slate.js'> </script>
		<!-- script src="js/gcal.js"> </script -->
		<!-- script src="https://apis.google.com/js/client.js?onload=checkAuth"> </script -->
		
		<script language="javascript">
		function getQueryParam(param, default) {
		        // get the pairs of params fist
		        var pairs = location.search.substring(1).split('&');
		        var values = [];
		        // now iterate each pair
		        for (var i = 0; i < pairs.length; i++) {
		            var params = pairs[i].split('=');
		            if (params[0] == param) {
		                // if the param doesn't have a value, like ?photos&videos, then return an empty srting
		                //return params[1] || '';
		                values.push(params[1]);
		            }
		        }
		
		        if (values.length > 0) {
		            return values;
		        } else {
		            return default;
		        }
		};
		
		function submit() {
			var settings = {
				"calendar": document.getElementById("in-cal").value,
				"color-hour": document.getElementById("in-hour").value,
				"color-minute": document.getElementById("in-min").value,
				"color-appointment": document.getElementById("in-appt").value,
				"color-circle": document.getElementById("in-circle").value,
				"color-background": document.getElementById("in-back").value,
			}
			
			// Set the return URL depending on the runtime environment
			var return_to = getQueryParam('return_to', 'pebblejs://close#');
			document.location = return_to + encodeURIComponent(JSON.stringify(settings));
		}
		</script>

		<style>
.title {
	padding: 15px 10px;
	text-transform: uppercase;
	font-family: 'PT Sans', sans-serif;
	font-size: 1.2em;
	font-weight: 500;
	color: #888888;
	text-align: center;
}
		</style>
	</head>
	<body>
		<h1 class='title'>FullCircle configuration</h1>

		<div class='item-container'>
			<div class='item-container-header'>Your calendar</div>
			<!--
			<div id="authorize-div" style="display: none">
				<div class='item-container-content'>
					<label class='item'>
						Google Calendar
						<input type="button" id="authorize-button" class="item-button item-input-button" value="Authorize" onclick="handleAuthClick(event)">
					</label>
				</div>
				<div class='item-container-footer'>
					To be able to display your appointments, FullCircle needs read access to your calendar.
				</div>
			</div> Authorize-div
			-->
			<div class="item-container-content">
				<label class="item">
					<div class="item-input-wrapper">
					<input type="text" class="item-input" name="calendar" id="in-cal" placeholder="Calendar ID">
					</div>
				</label>
			</div>
			<div class='item-container-footer'>
				The Google Calendar ID to read appointments from.
				Usually your Gmail address.
				Don't forget to make its free/busy information public.
			</div>
		</div>
		
		<div class="item-container">
		<div class="item-container-header">Colors</div>
			<div class="item-container-content">
			<label class="item">
			Clock hour hand
			<input type="text" class="item-color item-color-normal" name="color-hour" id="in-hour" value="#FFFFFF">
			</label>
			<label class="item">
			Clock minute hand
			<input type="text" class="item-color item-color-normal" name="color-min" id="in-min" value="#FFFFFF">
			</label>
			<label class="item">
			Appointment circle
			<input type="text" class="item-color item-color-normal" name="color-circle" id="in-circle" value="#000000">
			</label>
			<label class="item">
			Appointments
			<input type="text" class="item-color item-color-normal" name="color-appt" id="in-appt" value="#FFFFFF">
			</label>
			<label class="item">
			Background
			<input type="text" class="item-color item-color-normal" name="color-back" id="in-back" value="#000000">
			</label>
			</div>
		</div>

		<div class="item-container">
			<div class="button-container">
			<input type="button" class="item-button" onclick="submit()" value="SAVE">
			</div>
		</div>

	</body>
</html>
